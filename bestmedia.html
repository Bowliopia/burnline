<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Burnline – Best Cyberpunk Media Poll</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Inter:wght@400;600&family=Roboto+Mono:wght@400;600&display=swap" rel="stylesheet">
  <style>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Burnline – The Cyberpunk Magazine</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Inter:wght@400;600&family=Roboto+Mono:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #0f0f1c, #1b1e35);
      color: #f0f0f0;
    }
    html {
      scroll-behavior: smooth;
    }
    h1, h2, h3, h4, h5, h6, nav a, header {
      font-family: 'Orbitron', sans-serif;
    }
    .site-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #0df6e3;
      color: #0f0f1c;
      padding: 1rem 2rem;
      font-size: 2rem;
      font-family: 'Orbitron', sans-serif;
      flex-wrap: wrap;
      position: relative;
    }
    .logo-title {
      display: flex;
      align-items: center;
      gap: 1rem;
      text-decoration: none;
      color: inherit;
    }
    .logo-title img {
      height: 60px;
      width: auto;
    }
    .site-nav {
      display: flex;
      gap: 2rem;
      font-size: 1rem;
    }
    .site-nav a {
      color: #0f0f1c;
      text-decoration: none;
      font-weight: bold;
      transition: color 0.3s;
    }
    .site-nav a:hover {
      color: #ff4ac2;
    }
    .hamburger {
      display: none;
      flex-direction: column;
      justify-content: center;
      cursor: pointer;
      width: 30px;
      height: 25px;
      gap: 5px;
    }
    .hamburger div {
      background: #0f0f1c;
      height: 4px;
      width: 100%;
      border-radius: 2px;
    }
    @media (max-width: 768px) {
      .site-nav {
        flex-direction: column;
        width: 100%;
        display: none;
        background-color: #0df6e3;
        padding: 1rem 0;
        margin-top: 1rem;
      }
      .site-nav.active {
        display: flex;
      }
      .hamburger {
        display: flex;
      }
    }
    .hero {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      gap: 3rem;
      padding: 4rem 2rem;
      background: linear-gradient(to right, #1b1e35, #2d2b4a);
      text-align: left;
      flex-wrap: wrap;
    }
    .hero-text {
      max-width: 600px;
    }
    .hero-text h1 {
      font-size: 2.2rem;
      color: #ff4ac2;
      margin-bottom: 1rem;
    }
    .hero-text p {
      font-size: 1.2rem;
      color: #ccc;
      margin-bottom: 1.5rem;
    }
    .hero img {
      max-width: 300px;
      border-radius: 8px;
      box-shadow: 0 0 15px rgba(0,0,0,0.4);
    }
    .hero-button-container {
  width: 100%;
  text-align: center;
  margin-top: 0rem;
}
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 2rem;
      padding: 3rem 2rem;
    }
    .card {
      background: #22253e;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 0 20px rgba(13, 246, 227, 0.1);
    }
    .card img {
      width: 100%;
      height: 180px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 1rem;
    }
    .card h3 {
      color: #0df6e3;
      margin-bottom: 0.5rem;
    }
    .card p {
      font-size: 0.95rem;
      color: #bbb;
    }
    .gradient-heading {
      font-size: 2rem;
      background: linear-gradient(90deg, #f72585, #7209b7);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 1rem;
    }
    footer {
      background: #0f0f1c;
      padding: 4rem 2rem 2rem;
      color: #aaa;
      font-size: 0.9rem;
      font-family: 'Inter', sans-serif;
    }
    footer a:hover {
      color: #0df6e3;
    }
    .footer-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 3rem;
      max-width: 1200px;
      margin: auto;
    }
    .footer-column {
      flex: 1 1 250px;
      min-width: 200px;
    }
    .footer-logo {
      height: 100px;
      margin-bottom: 1rem;
    }
    .footer-bottom {
      text-align: center;
      margin-top: 3rem;
      border-top: 1px solid #222;
      padding-top: 1rem;
      color: #555;
    }
    .newsletter-input {
      padding: 0.6rem 1rem;
      border-radius: 4px;
      border: none;
      width: 70%;
      margin-bottom: 0.8rem;
    }
    .newsletter-button {
      padding: 0.6rem 1.2rem;
      background-color: #0df6e3;
      color: #0f0f1c;
      border: none;
      border-radius: 4px;
      font-weight: bold;
      cursor: pointer;
    }
    .read-issue-btn {
      background-color: #0df6e3;
      border: none;
      color: #0f0f1c;
      padding: 0.75rem 2rem;
      font-weight: bold;
      font-size: 1rem;
      border-radius: 4px;
      cursor: pointer;
      display: inline-block;
      margin-top: 1rem;
      transition: background-color 0.3s;
    }
    .read-issue-btn:hover {
      background-color: #0ad3c6;
    }
  </style>
</head>
<body>
  <header class="site-header">
    <a href="index.html" class="logo-title">
      <img src="Flame logo-1.png.png" alt="Burnline logo">
      <span>BURNLINE</span>
    </a>
    <div class="hamburger" onclick="toggleMenu()">
      <div></div>
      <div></div>
      <div></div>
    </div>
    <nav class="site-nav" id="site-nav">
      <a href="https://bowliopia.github.io/burnline/fiction.html">Fiction</a>
      <a href="https://bowliopia.github.io/burnline/art.html">Art</a>
      <a href="https://bowliopia.github.io/burnline/about.html">About</a>
      <a href="https://bowliopia.github.io/burnline/submit.html">Submit</a>
      <a href="#latest-issue">Read Latest</a>
    </nav>
  </header>

    body { margin:0; font-family:'Inter',sans-serif; background:linear-gradient(135deg,#0f0f1c,#1b1e35); color:#f0f0f0; }
    html { scroll-behavior:smooth; }
    h1,h2,nav a,header { font-family:'Orbitron',sans-serif; }
    .site-header { display:flex; justify-content:space-between; align-items:center; background:#0df6e3; color:#0f0f1c; padding:1rem 2rem; font-size:2rem; flex-wrap:wrap; }
    .logo-title { display:flex; align-items:center; gap:1rem; text-decoration:none; color:inherit; }
    .site-nav { display:flex; gap:2rem; font-size:1rem; }
    .site-nav a { color:#0f0f1c; text-decoration:none; font-weight:bold; transition:color .3s; }
    .site-nav a:hover { color:#ff4ac2; }
    .hamburger { display:none; flex-direction:column; justify-content:center; cursor:pointer; width:30px; height:25px; gap:5px; }
    .hamburger div { background:#0f0f1c; height:4px; width:100%; border-radius:2px; }
    @media(max-width:768px){ .site-nav{display:none;flex-direction:column;width:100%;background:#0df6e3;padding:1rem 0;margin-top:1rem;} .site-nav.active{display:flex;} .hamburger{display:flex;} }
    .container { padding:2rem; max-width:800px; margin:0 auto; }
    .gradient-heading { font-size:2rem; background:linear-gradient(90deg,#f72585,#7209b7); -webkit-background-clip:text; -webkit-text-fill-color:transparent; margin-bottom:1rem; }
    .poll-option { margin-bottom:1rem; }
    .vote-btn { background:#0df6e3; color:#0f0f1c; border:none; padding:.5rem 1rem; border-radius:4px; cursor:pointer; font-weight:bold; margin-left:1rem; }
    .vote-btn:hover{ background:#0ad3c6; }
    .writein { width:100%; padding:.5rem; margin-top:.5rem; border-radius:4px; border:none; }
    .results { margin-top:2rem; }
    .result-bar { background:#22253e; border-radius:4px; overflow:hidden; margin:0.5rem 0; position:relative; }
    .result-fill { background:#ff4ac2; height:100%; width:0%; transition: width .5s; }
    .result-label { position:absolute; left:8px; top:0; font-size:0.9rem; line-height:24px; }
    footer{ background:#0f0f1c; padding:2rem; color:#aaa; font-size:.9rem; font-family:'Inter',sans-serif; text-align:center; }
  </style>
</head>
<body>
  <header class="site-header">
    <a href="/" class="logo-title"><img src="Flame logo-1.png.png" alt="Burnline logo" height="60"><span>BURNLINE</span></a>
    <div class="hamburger" onclick="toggleMenu()"><div></div><div></div><div></div></div>
    <nav class="site-nav" id="site-nav">
      <a href="fiction.html">Fiction</a><a href="art.html">Art</a><a href="about.html">About</a><a href="submit.html">Submit</a><a href="#poll">Poll</a>
    </nav>
  </header>

  <section class="container" id="poll">
    <h1 class="gradient-heading">Vote: Best Cyberpunk Media of All Time</h1>
    <div id="poll-options">
      <!-- Options will be injected here -->
    </div>
    <div style="margin-top:1rem;">
      <input type="text" id="writein" class="writein" placeholder="Other: write your favorite...">
      <button id="writein-vote" class="vote-btn">Submit Write‑In</button>
    </div>
    
    <div class="results" id="results-section">
      <h2>Live Results</h2>
      <div id="results-bars"></div>
    </div>
  </section>

  <footer>&copy; 2025 Burnline Magazine — All rights reserved</footer>

<script>
const AIRTABLE_API_KEY = 'YOUR_AIRTABLE_API_KEY';
const BASE_ID = 'YOUR_BASE_ID';
const TABLE_NAME = 'Votes';
const fieldOption = 'Option';
const fieldCount = 'Count';
const airtableUrl = `https://api.airtable.com/v0/${BASE_ID}/${encodeURIComponent(TABLE_NAME)}`;

const options = [
  'Neuromancer', 'Snow Crash', 'Altered Carbon',
  'Blade Runner', 'Ghost in the Shell', 'Akira',
  'Cyberpunk: Edgerunners', 'Cyberpunk 2077',
  'Deus Ex', 'Black Mirror'
];

async function fetchVotes() {
  const resp = await fetch(airtableUrl + '?maxRecords=100&sort[0][field]='+fieldOption, {
    headers: { Authorization: 'Bearer ' + AIRTABLE_API_KEY }
  });
  const data = await resp.json();
  return data.records;
}

async function updateCount(recordId, newCount) {
  await fetch(airtableUrl + '/' + recordId, {
    method: 'PATCH',
    headers: {
      Authorization: 'Bearer ' + AIRTABLE_API_KEY,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ fields: { [fieldCount]: newCount } })
  });
}

async function addWriteIn(option) {
  await fetch(airtableUrl, {
    method: 'POST',
    headers: {
      Authorization: 'Bearer ' + AIRTABLE_API_KEY,
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ fields: { [fieldOption]: option, [fieldCount]: 1 } })
  });
}

function renderOptions(votes) {
  const container = document.getElementById('poll-options');
  container.innerHTML = '';
  options.forEach(opt => {
    const rec = votes.find(r=>r.fields[fieldOption]===opt);
    const count = rec ? rec.fields[fieldCount] : 0;
    const div = document.createElement('div');
    div.className = 'poll-option';
    div.innerHTML = `
      <span>${opt} (<span id="count-${opt}">${count}</span>)</span>
      <button class="vote-btn" data-option="${opt}">Vote</button>
    `;
    container.appendChild(div);
  });

  // add listener
  container.querySelectorAll('.vote-btn').forEach(btn => {
    btn.onclick = async () => {
      const opt = btn.dataset.option;
      const rec = votes.find(r=>r.fields[fieldOption]===opt);
      if (rec) {
        const newCount = rec.fields[fieldCount] + 1;
        await updateCount(rec.id, newCount);
      } else {
        await addWriteIn(opt);
      }
      refreshAll();
    };
  });
}

function renderResults(votes) {
  const container = document.getElementById('results-bars');
  container.innerHTML = '';
  const total = votes.reduce((sum,r)=> sum + (r.fields[fieldCount]||0), 0);
  votes.forEach(r => {
    const opt = r.fields[fieldOption];
    const cnt = r.fields[fieldCount]||0;
    const pct = total ? Math.round(cnt/total*100) : 0;
    const bar = document.createElement('div');
    bar.className = 'result-bar';
    bar.style.height = '24px';
    const fill = document.createElement('div');
    fill.className = 'result-fill';
    fill.style.width = pct+'%';
    fill.style.height = '100%';
    const label = document.createElement('div');
    label.className = 'result-label';
    label.textContent = `${opt} — ${cnt} votes`;
    bar.appendChild(fill);
    bar.appendChild(label);
    container.appendChild(bar);
  });
}

async function refreshAll() {
  const votes = await fetchVotes();
  renderOptions(votes);
  renderResults(votes);
}

document.getElementById('writein-vote').onclick = async () => {
  const val = document.getElementById('writein').value.trim();
  if (!val) return alert('Please type something');
  await addWriteIn(val);
  document.getElementById('writein').value = '';
  refreshAll();
};

// menu toggle for nav
function toggleMenu(){
  document.getElementById('site-nav').classList.toggle('active');
}

window.onload = refreshAll;
</script>
</body>
</html>
